(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{7009:function(e,t,n){"use strict";var a,r,s=n(7294);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}t.Z=function(e){return s.createElement("svg",l({width:108,height:108,viewBox:"0 0 108 108",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=s.createElement("g",{clipPath:"url(#clip0_2_250)",filter:"url(#filter0_d_2_250)"},s.createElement("path",{d:"M53.6711 2.64662C52.8336 2.6901 52.0131 2.90408 51.2577 3.27602L18.3249 19.4927C17.4725 19.9122 16.7236 20.5226 16.1336 21.2786C15.5437 22.0345 15.1281 22.9166 14.9175 23.8593L6.79271 60.286C6.6051 61.1253 6.5841 61.9945 6.73096 62.8422C6.87783 63.6899 7.18957 64.4989 7.64773 65.2213C7.75882 65.3979 7.8783 65.5689 8.00573 65.7335L30.8005 94.9417C31.3905 95.6975 32.1396 96.3077 32.992 96.727C33.8444 97.1463 34.7782 97.364 35.7242 97.3638L72.2792 97.3551C73.2248 97.3558 74.1585 97.1388 75.0109 96.7203C75.8633 96.3017 76.6125 95.6923 77.2029 94.9374L99.9893 65.7249C100.58 64.9687 100.996 64.0863 101.206 63.1432C101.417 62.2 101.417 61.2205 101.206 60.2774L93.0691 23.8507C92.8585 22.9079 92.4428 22.0258 91.8529 21.2699C91.263 20.5139 90.5141 19.9035 89.6617 19.484L56.7247 3.27602C55.7744 2.80815 54.7245 2.59173 53.6711 2.64662Z",fill:"#326CE5"}),s.createElement("path",{d:"M53.6534 0.00897171C52.7703 0.0566405 51.9055 0.283895 51.1094 0.677431L16.3402 17.7926C15.4404 18.2355 14.6498 18.8799 14.0271 19.6779C13.4044 20.476 12.9656 21.4072 12.7433 22.4023L4.16786 60.8561C3.96921 61.7425 3.94662 62.6606 4.10145 63.5561C4.25627 64.4515 4.58535 65.3061 5.0692 66.0692C5.18691 66.2548 5.31341 66.4344 5.44825 66.6074L29.5108 97.4434C30.1337 98.2411 30.9243 98.8852 31.8241 99.3278C32.7239 99.7704 33.7097 100 34.7083 100L73.2976 99.9913C74.2958 99.992 75.2814 99.7629 76.1812 99.3211C77.0809 98.8792 77.8718 98.236 78.4951 97.439L102.549 66.5987C103.172 65.8009 103.611 64.8699 103.833 63.875C104.055 62.8801 104.056 61.8468 103.834 60.8517L95.2458 22.3937C95.0229 21.3993 94.5839 20.4689 93.9612 19.6717C93.3385 18.8744 92.5482 18.2307 91.6489 17.7882L56.8797 0.673091C55.8757 0.178835 54.7663 -0.0495361 53.6534 0.00897171ZM53.6702 2.64808C54.7236 2.59319 55.7736 2.80961 56.7238 3.27748L89.6608 19.4854C90.5132 19.9049 91.2622 20.5154 91.8521 21.2713C92.442 22.0273 92.8577 22.9094 93.0683 23.8521L101.206 60.2788C101.416 61.2219 101.416 62.2015 101.205 63.1446C100.995 64.0877 100.579 64.9701 99.9884 65.7263L77.2021 94.9388C76.6116 95.6938 75.8624 96.3032 75.01 96.7218C74.1577 97.1403 73.224 97.3573 72.2784 97.3566L35.7234 97.3653C34.7774 97.3655 33.8435 97.1478 32.9911 96.7285C32.1387 96.3092 31.3897 95.699 30.7997 94.9432L8.00489 65.735C7.87746 65.5704 7.75798 65.3994 7.64689 65.2228C7.18873 64.5004 6.87699 63.6914 6.73013 62.8437C6.58327 61.996 6.60426 61.1268 6.79188 60.2875L14.9166 23.8608C15.1272 22.9181 15.5429 22.036 16.1328 21.2801C16.7227 20.5241 17.4717 19.9137 18.324 19.4942L51.2568 3.27752C52.0123 2.90558 52.8328 2.6916 53.6702 2.64812L53.6702 2.64808Z",fill:"white"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M34 35.9999L54.0764 30L74.1527 35.9999L54.0764 41.9997L34 35.9999Z",fill:"white"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M34 38.2974V60.3128L52.7056 70.9912L52.7982 44.0592L34 38.2974Z",fill:"white"}),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M74.1527 38.2974V60.3128L55.4471 70.9912L55.3545 44.0592L74.1527 38.2974Z",fill:"white"}))),r||(r=s.createElement("defs",null,s.createElement("filter",{id:"filter0_d_2_250",x:0,y:0,width:108,height:108,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},s.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),s.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),s.createElement("feOffset",{dy:4}),s.createElement("feGaussianBlur",{stdDeviation:2}),s.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),s.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),s.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_2_250"}),s.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_2_250",result:"shape"})),s.createElement("clipPath",{id:"clip0_2_250"},s.createElement("rect",{width:100,height:100,fill:"white",transform:"translate(4)"})))))}},8348:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(5893);function r(e){var t=e.className;return(0,a.jsxs)("svg",{role:"status",className:"".concat(t," mr-2 animate-spin text-gray-400 fill-blue-600"),viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})}function s(){return(0,a.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,a.jsx)(r,{className:"w-12 h-12"})})}},1475:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var a=n(9499),r=n(29),s=n(7794),l=n.n(s),i=n(9734),c=n(7294),o=n(8348),d=n(4729),u=n(7106),f=n(4589),m=n(6032),p=n(5893);function h(e){var t=e.data,n=e.selectedNamespace,a=e.setSelectedNamespace;return(0,p.jsx)("div",{className:"w-72",children:(0,p.jsx)(d.R,{value:n,onChange:a,children:(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsxs)(d.R.Button,{className:"relative w-full cursor-default rounded-lg bg-white py-2 pl-3 pr-10 text-left shadow-md focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-blue-300 sm:text-sm",children:[x(n)&&(0,p.jsx)("span",{className:"absolute inset-y-0 flex left-0 items-center pl-3 text-green-600",children:(0,p.jsx)(f.Z,{className:"h-5 w-5","aria-hidden":"true"})}),(0,p.jsx)("span",{className:"block truncate pl-6",children:n.name}),(0,p.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,p.jsx)(m.Z,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),(0,p.jsx)(u.u,{as:c.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,p.jsx)(d.R.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:t&&t.namespaces&&t.namespaces.map(function(e,t){return(0,p.jsx)(d.R.Option,{className:function(e){var t=e.active;return"relative cursor-default select-none py-2 pl-10 pr-4 ".concat(t?"bg-blue-100 text-blue-900":"text-gray-900")},value:e,children:function(t){var n=t.selected;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{className:"block truncate ".concat(n?"font-medium":"font-normal"),children:e.name}),x(e)?(0,p.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,p.jsx)(f.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},t)})})})]})})})}function x(e){return e.labeled||e.objects.some(function(e){return e.labeled})}var b=n(7009);function g(e){var t,n=e.disabled,a=e.selected,r=e.object,s=e.onSelection;return(0,p.jsxs)("label",{className:"shadow-lg border border-gray-200 rounded-lg ".concat(a?"bg-blue-500 text-white cursor-pointer":n?"bg-gray-100 cursor-not-allowed":"bg-white hover:bg-gray-100 cursor-pointer"),children:[(0,p.jsx)("input",{type:"checkbox",className:"hidden",disabled:n,onChange:function(){s(r)}}),(0,p.jsxs)("div",{className:"flex flex-row p-3 items-center space-x-4",children:[(r.kind.toString(),(0,p.jsx)(b.Z,{className:"w-12 h-12"})),(0,p.jsxs)("div",{className:"flex flex-col items-start",children:[(0,p.jsx)("div",{className:"font-bold",children:r.name}),(0,p.jsx)("div",{children:r.kind}),(0,p.jsxs)("div",{children:[r.instances," ",1===r.instances?"running instance":"running instances"]})]})]})]})}function v(e){var t=e.selectedNamespace,n=e.changeObjectLabel;return t&&0===t.objects.length?(0,p.jsx)("div",{className:"text-center shadow-lg border border-gray-200 rounded-lg bg-gray-100 p-5 font-light text-gray-900 w-fit",children:"This namespace has no applications"}):(0,p.jsx)("div",{className:"grid lg:grid-cols-3 2xl:grid-cols-4 max-w-7xl gap-4 pr-4",children:t&&t.objects.map(function(e){return(0,p.jsx)(g,{disabled:t.labeled,selected:e.labeled,object:e,onSelection:n},"".concat(e.kind,"-").concat(e.name))})})}var j=n(6134);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y={name:"namespaces not found",labeled:!1,objects:[]};function N(){return(N=(0,r.Z)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("/api/appselector",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:t})});case 4:e.sent.ok&&(window.location.href="/dest/new");case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e){var t=e.enabled,n=e.setEnabled;return(0,p.jsxs)(j.r,{checked:t,onChange:n,className:"".concat(t?"bg-blue-600":"bg-gray-200"," relative inline-flex h-6 w-11 items-center rounded-full"),children:[(0,p.jsx)("span",{className:"sr-only",children:"Select everything in this namespace"}),(0,p.jsx)("span",{className:"".concat(t?"translate-x-6":"translate-x-1"," inline-block h-4 w-4 transform rounded-full bg-white transition")})]})}var O=function(){var e=(0,c.useState)("OPT_OUT");e[0],e[1];var t=(0,c.useState)([]);t[0],t[1];var n=(0,c.useState)({namespaces:[]}),a=n[0],r=n[1],s=(0,i.ZP)("/api/v2/applications",function(e){return fetch(e).then(function(e){return e.json()})}),l=s.data,d=s.error,u=(0,c.useState)(y),f=u[0],m=u[1];return d?(0,p.jsx)("div",{children:"failed to load"}):l?0===a.namespaces.length&&l?(r(l),m(l.namespaces[0]),(0,p.jsx)(o.Z,{})):(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"text-5xl mb-6",children:"Choose Target Applications"}),(0,p.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,p.jsx)("div",{className:"text-xl font-light mb-2",children:"Select namespace:"}),(0,p.jsxs)("div",{className:"flex flex-row space-x-10 items-baseline",children:[(0,p.jsx)("div",{children:(0,p.jsx)(h,{data:a,selectedNamespace:f,setSelectedNamespace:m})}),(0,p.jsxs)("div",{className:"flex flex-row space-x-2 items-baseline",children:[(0,p.jsx)(L,{enabled:f.labeled,setEnabled:function(){var e=w({},f);e.labeled=!e.labeled,e.labeled&&(e.objects=e.objects.map(function(e){return w(w({},e),{},{labeled:!1})})),r({namespaces:a.namespaces.map(function(t){return t.name===e.name?e:t})}),m(e)}}),(0,p.jsx)("div",{className:"font-light",children:"Select everything in this namespace"})]})]})]}),(0,p.jsx)("div",{className:"pt-4",children:(0,p.jsx)(v,{selectedNamespace:f,changeObjectLabel:function(e){var t=w({},f);t.objects=t.objects.map(function(t){return t.name===e.name&&t.kind===e.kind?w(w({},t),{},{labeled:!t.labeled}):t}),r({namespaces:a.namespaces.map(function(e){return e.name===t.name?t:e})}),m(t)}})}),(0,p.jsx)("button",{type:"button",onClick:function(){return function(e){return N.apply(this,arguments)}(a)},className:"mt-6 text-white focus:ring-4 font-bold rounded-md text-sm px-14 py-2.5 mr-2 mb-2 bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-blue-800",children:"Save Changes"})]}):(0,p.jsx)(o.Z,{})}},5751:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setup",function(){return n(1475)}])}},function(e){e.O(0,[734,278,774,888,179],function(){return e(e.s=5751)}),_N_E=e.O()}]);